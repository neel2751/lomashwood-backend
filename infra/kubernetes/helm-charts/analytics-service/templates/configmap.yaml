apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "analytics-service.fullname" . }}
  namespace: {{ .Release.Namespace }}
  labels:
    {{- include "analytics-service.labels" . | nindent 4 }}
data:
  NODE_ENV: {{ .Values.env.NODE_ENV | quote }}
  PORT: {{ .Values.env.PORT | default "4006" | quote }}
  HOST: {{ .Values.env.HOST | default "0.0.0.0" | quote }}
  LOG_LEVEL: {{ .Values.env.LOG_LEVEL | default "info" | quote }}

  CORS_ORIGINS: {{ .Values.env.CORS_ORIGINS | quote }}
  RATE_LIMIT_WINDOW_MS: {{ .Values.env.RATE_LIMIT_WINDOW_MS | default "60000" | quote }}
  RATE_LIMIT_MAX: {{ .Values.env.RATE_LIMIT_MAX | default "120" | quote }}

  KAFKA_CLIENT_ID: {{ .Values.env.KAFKA_CLIENT_ID | default "analytics-service" | quote }}
  KAFKA_GROUP_ID: {{ .Values.env.KAFKA_GROUP_ID | default "analytics-service-group" | quote }}

  ACTIVE_EMAIL_PROVIDER: {{ .Values.env.ACTIVE_EMAIL_PROVIDER | default "ses" | quote }}
  ACTIVE_SMS_PROVIDER: {{ .Values.env.ACTIVE_SMS_PROVIDER | default "twilio" | quote }}
  ACTIVE_PUSH_PROVIDER: {{ .Values.env.ACTIVE_PUSH_PROVIDER | default "firebase" | quote }}