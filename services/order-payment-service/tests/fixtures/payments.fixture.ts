import { PaymentStatus, PaymentGateway, PaymentMethod } from '../../src/shared/types';
import {
  makeId,
  makeDate,
  FIXED_DATE,
  CUSTOMER_ID_1,
  CUSTOMER_ID_2,
  CUSTOMER_ID_3,
  CURRENCY_GBP,
} from './common.fixture';
import {
  ORDER_PENDING_KITCHEN,
  ORDER_PENDING_MIXED,
  ORDER_CONFIRMED,
  ORDER_REFUNDED,
  ORDER_WITH_COUPON,
} from './orders.fixture';

export const PAYMENT_PENDING = {
  id: makeId(),
  orderId: ORDER_PENDING_KITCHEN.id,
  customerId: CUSTOMER_ID_1,
  gateway: PaymentGateway.STRIPE,
  method: PaymentMethod.CARD,
  status: PaymentStatus.PENDING,
  stripePaymentIntentId: 'pi_3OxKpLF1234567890ABCD',
  stripeClientSecret: 'pi_3OxKpLF1234567890ABCD_secret_mockSecretValue0001',
  stripeChargeId: null,
  stripeReceiptUrl: null,
  stripeBalanceTransactionId: null,
  stripePaymentMethodId: null,
  amount: 2998.80,
  amountCaptured: 0.00,
  currency: CURRENCY_GBP,
  idempotencyKey: 'idem-payment-pending-001',
  paidAt: null,
  createdAt: FIXED_DATE,
  updatedAt: FIXED_DATE,
};

export const PAYMENT_REQUIRES_ACTION = {
  id: makeId(),
  orderId: ORDER_PENDING_MIXED.id,
  customerId: CUSTOMER_ID_1,
  gateway: PaymentGateway.STRIPE,
  method: PaymentMethod.CARD,
  status: PaymentStatus.REQUIRES_ACTION,
  stripePaymentIntentId: 'pi_3OxKpLF1234567890BCDE',
  stripeClientSecret: 'pi_3OxKpLF1234567890BCDE_secret_mockSecretValue0002',
  stripeChargeId: null,
  stripeReceiptUrl: null,
  stripeBalanceTransactionId: null,
  stripePaymentMethodId: 'pm_mock_3ds_card',
  amount: 6837.60,
  amountCaptured: 0.00,
  currency: CURRENCY_GBP,
  idempotencyKey: 'idem-payment-3ds-001',
  paidAt: null,
  createdAt: FIXED_DATE,
  updatedAt: FIXED_DATE,
};

export const PAYMENT_SUCCEEDED = {
  id: makeId(),
  orderId: ORDER_CONFIRMED.id,
  customerId: CUSTOMER_ID_3,
  gateway: PaymentGateway.STRIPE,
  method: PaymentMethod.CARD,
  status: PaymentStatus.SUCCEEDED,
  stripePaymentIntentId: 'pi_3OxKpLF1234567890CDEF',
  stripeClientSecret: 'pi_3OxKpLF1234567890CDEF_secret_mockSecretValue0003',
  stripeChargeId: 'ch_3OxKpLF1234567890CDEF',
  stripeReceiptUrl: 'https://pay.stripe.com/receipts/mock_receipt_001',
  stripeBalanceTransactionId: 'txn_3OxKpLF1234567890CDEF',
  stripePaymentMethodId: 'pm_mock_visa_4242',
  amount: 2998.80,
  amountCaptured: 2998.80,
  currency: CURRENCY_GBP,
  idempotencyKey: 'idem-payment-succeeded-001',
  paidAt: FIXED_DATE,
  createdAt: makeDate(-2),
  updatedAt: FIXED_DATE,
};

export const PAYMENT_SUCCEEDED_WITH_COUPON = {
  id: makeId(),
  orderId: ORDER_WITH_COUPON.id,
  customerId: CUSTOMER_ID_1,
  gateway: PaymentGateway.STRIPE,
  method: PaymentMethod.CARD,
  status: PaymentStatus.SUCCEEDED,
  stripePaymentIntentId: 'pi_3OxKpLF1234567890DEFG',
  stripeClientSecret: 'pi_3OxKpLF1234567890DEFG_secret_mockSecretValue0004',
  stripeChargeId: 'ch_3OxKpLF1234567890DEFG',
  stripeReceiptUrl: 'https://pay.stripe.com/receipts/mock_receipt_002',
  stripeBalanceTransactionId: 'txn_3OxKpLF1234567890DEFG',
  stripePaymentMethodId: 'pm_mock_mastercard_5454',
  amount: 2698.92,
  amountCaptured: 2698.92,
  currency: CURRENCY_GBP,
  idempotencyKey: 'idem-payment-coupon-001',
  paidAt: FIXED_DATE,
  createdAt: makeDate(-1),
  updatedAt: FIXED_DATE,
};

export const PAYMENT_REFUNDED = {
  id: makeId(),
  orderId: ORDER_REFUNDED.id,
  customerId: CUSTOMER_ID_3,
  gateway: PaymentGateway.STRIPE,
  method: PaymentMethod.CARD,
  status: PaymentStatus.REFUNDED,
  stripePaymentIntentId: 'pi_3OxKpLF1234567890EFGH',
  stripeClientSecret: 'pi_3OxKpLF1234567890EFGH_secret_mockSecretValue0005',
  stripeChargeId: 'ch_3OxKpLF1234567890EFGH',
  stripeReceiptUrl: 'https://pay.stripe.com/receipts/mock_receipt_003',
  stripeBalanceTransactionId: 'txn_3OxKpLF1234567890EFGH',
  stripePaymentMethodId: 'pm_mock_visa_1234',
  amount: 3838.80,
  amountCaptured: 3838.80,
  currency: CURRENCY_GBP,
  idempotencyKey: 'idem-payment-refunded-001',
  paidAt: makeDate(-8),
  createdAt: makeDate(-10),
  updatedAt: makeDate(-2),
};

export const PAYMENT_FAILED = {
  id: makeId(),
  orderId: makeId(),
  customerId: CUSTOMER_ID_2,
  gateway: PaymentGateway.STRIPE,
  method: PaymentMethod.CARD,
  status: PaymentStatus.FAILED,
  stripePaymentIntentId: 'pi_3OxKpLF1234567890FGHI',
  stripeClientSecret: 'pi_3OxKpLF1234567890FGHI_secret_mockSecretValue0006',
  stripeChargeId: null,
  stripeReceiptUrl: null,
  stripeBalanceTransactionId: null,
  stripePaymentMethodId: 'pm_mock_declined_card',
  amount: 3838.80,
  amountCaptured: 0.00,
  currency: CURRENCY_GBP,
  idempotencyKey: 'idem-payment-failed-001',
  paidAt: null,
  createdAt: makeDate(-1),
  updatedAt: makeDate(-1),
};

export const PAYMENT_PARTIALLY_REFUNDED = {
  id: makeId(),
  orderId: makeId(),
  customerId: CUSTOMER_ID_2,
  gateway: PaymentGateway.STRIPE,
  method: PaymentMethod.CARD,
  status: PaymentStatus.PARTIALLY_REFUNDED,
  stripePaymentIntentId: 'pi_3OxKpLF1234567890GHIJ',
  stripeClientSecret: 'pi_3OxKpLF1234567890GHIJ_secret_mockSecretValue0007',
  stripeChargeId: 'ch_3OxKpLF1234567890GHIJ',
  stripeReceiptUrl: 'https://pay.stripe.com/receipts/mock_receipt_004',
  stripeBalanceTransactionId: 'txn_3OxKpLF1234567890GHIJ',
  stripePaymentMethodId: 'pm_mock_amex_3782',
  amount: 6356.40,
  amountCaptured: 6356.40,
  currency: CURRENCY_GBP,
  idempotencyKey: 'idem-payment-partial-refund-001',
  paidAt: makeDate(-5),
  createdAt: makeDate(-7),
  updatedAt: makeDate(-1),
};

export const STRIPE_PAYMENT_INTENT_MOCK = {
  id: 'pi_3OxKpLF1234567890ABCD',
  object: 'payment_intent',
  amount: 299880,
  amount_capturable: 0,
  amount_received: 299880,
  currency: 'gbp',
  status: 'succeeded',
  client_secret: 'pi_3OxKpLF1234567890ABCD_secret_mockSecretValue0001',
  payment_method: 'pm_mock_visa_4242',
  latest_charge: 'ch_3OxKpLF1234567890CDEF',
  metadata: {
    orderId: ORDER_CONFIRMED.id,
    orderNumber: ORDER_CONFIRMED.orderNumber,
    customerId: CUSTOMER_ID_3,
  },
  created: Math.floor(FIXED_DATE.getTime() / 1000),
  livemode: false,
};

export const ALL_PAYMENTS = [
  PAYMENT_PENDING,
  PAYMENT_REQUIRES_ACTION,
  PAYMENT_SUCCEEDED,
  PAYMENT_SUCCEEDED_WITH_COUPON,
  PAYMENT_REFUNDED,
  PAYMENT_FAILED,
  PAYMENT_PARTIALLY_REFUNDED,
];