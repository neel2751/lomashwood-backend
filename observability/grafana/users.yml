apiVersion: 1

deleteOrgs: []

orgs:
  - id: 1
    name: Lomash Wood
    address:
      address1: ""
      address2: ""
      city: ""
      zipCode: ""
      state: ""
      country: GB

groups:

  - orgId: 1
    uid: team-backend-engineers
    name: Backend Engineers
    email: backend@lomashwood.com
    members:
      - login: backend-lead@lomashwood.com
      - login: engineer-1@lomashwood.com
      - login: engineer-2@lomashwood.com
    permissions:
      - teamId: team-backend-engineers
        permission: 2

  - orgId: 1
    uid: team-devops
    name: DevOps
    email: devops@lomashwood.com
    members:
      - login: devops@lomashwood.com
    permissions:
      - teamId: team-devops
        permission: 2

  - orgId: 1
    uid: team-management
    name: Management
    email: management@lomashwood.com
    members:
      - login: cto@lomashwood.com
      - login: engineering-manager@lomashwood.com
    permissions:
      - teamId: team-management
        permission: 1

  - orgId: 1
    uid: team-finance
    name: Finance
    email: finance@lomashwood.com
    members:
      - login: finance@lomashwood.com
    permissions:
      - teamId: team-finance
        permission: 1

users:

  - name: Platform Admin
    email: devops@lomashwood.com
    login: devops@lomashwood.com
    password: ${GF_USER_DEVOPS_PASSWORD}
    orgId: 1
    orgRole: Admin
    isGrafanaAdmin: true
    theme: dark

  - name: Engineering Manager
    email: engineering-manager@lomashwood.com
    login: engineering-manager@lomashwood.com
    password: ${GF_USER_ENG_MANAGER_PASSWORD}
    orgId: 1
    orgRole: Admin
    isGrafanaAdmin: false
    theme: dark

  - name: Backend Lead
    email: backend-lead@lomashwood.com
    login: backend-lead@lomashwood.com
    password: ${GF_USER_BACKEND_LEAD_PASSWORD}
    orgId: 1
    orgRole: Editor
    isGrafanaAdmin: false
    theme: dark

  - name: CTO
    email: cto@lomashwood.com
    login: cto@lomashwood.com
    password: ${GF_USER_CTO_PASSWORD}
    orgId: 1
    orgRole: Viewer
    isGrafanaAdmin: false
    theme: dark

  - name: Finance
    email: finance@lomashwood.com
    login: finance@lomashwood.com
    password: ${GF_USER_FINANCE_PASSWORD}
    orgId: 1
    orgRole: Viewer
    isGrafanaAdmin: false
    theme: light

  - name: On-Call Bot
    email: oncall-bot@lomashwood.com
    login: oncall-bot@lomashwood.com
    password: ${GF_USER_ONCALL_BOT_PASSWORD}
    orgId: 1
    orgRole: Viewer
    isGrafanaAdmin: false
    theme: dark

role_assignments:

  - teamId: team-backend-engineers
    folderUid: core-services
    permission: Edit

  - teamId: team-backend-engineers
    folderUid: infrastructure
    permission: View

  - teamId: team-backend-engineers
    folderUid: slo-sla
    permission: View

  - teamId: team-backend-engineers
    folderUid: security
    permission: View

  - teamId: team-backend-engineers
    folderUid: staging
    permission: Edit

  - teamId: team-devops
    folderUid: core-services
    permission: Edit

  - teamId: team-devops
    folderUid: infrastructure
    permission: Edit

  - teamId: team-devops
    folderUid: slo-sla
    permission: Edit

  - teamId: team-devops
    folderUid: security
    permission: Edit

  - teamId: team-devops
    folderUid: business-metrics
    permission: View

  - teamId: team-devops
    folderUid: staging
    permission: Edit

  - teamId: team-management
    folderUid: business-metrics
    permission: View

  - teamId: team-management
    folderUid: slo-sla
    permission: View

  - teamId: team-management
    folderUid: core-services
    permission: View

  - teamId: team-management
    folderUid: infrastructure
    permission: View

  - teamId: team-finance
    folderUid: business-metrics
    permission: View

alert_notification_channels:

  - name: PagerDuty-Critical
    type: pagerduty
    uid: pagerduty-critical
    orgId: 1
    isDefault: false
    sendReminder: false
    settings:
      integrationKey: ${GF_PAGERDUTY_INTEGRATION_KEY}
      severity: critical
      class: backend
      component: lomash-wood
      group: production
      summary: |
        {{ .Title }}

  - name: Slack-Incidents
    type: slack
    uid: slack-incidents
    orgId: 1
    isDefault: false
    sendReminder: true
    frequency: 4h
    settings:
      url: ${GF_SLACK_INCIDENTS_WEBHOOK_URL}
      channel: "#incidents"
      username: "Grafana Alerts"
      iconEmoji: ":red_circle:"
      mentionUsers: ""
      mentionGroups: ""
      mentionChannel: "here"
      title: |
        [{{ .Status | toUpper }}] {{ .Title }}
      text: |
        {{ range .Alerts }}
        *Alert:* {{ .Name }}
        *Service:* {{ index .Labels "service" }}
        *Severity:* {{ index .Labels "severity" }}
        *Summary:* {{ index .Annotations "summary" }}
        {{ if index .Annotations "runbook" }}*Runbook:* {{ index .Annotations "runbook" }}{{ end }}
        {{ end }}

  - name: Slack-Alerts
    type: slack
    uid: slack-alerts
    orgId: 1
    isDefault: true
    sendReminder: false
    settings:
      url: ${GF_SLACK_ALERTS_WEBHOOK_URL}
      channel: "#alerts"
      username: "Grafana Alerts"
      iconEmoji: ":warning:"
      title: |
        [{{ .Status | toUpper }}] {{ .Title }}
      text: |
        {{ range .Alerts }}
        *Alert:* {{ .Name }}
        *Description:* {{ index .Annotations "description" }}
        {{ end }}

  - name: Email-OnCall
    type: email
    uid: email-oncall
    orgId: 1
    isDefault: false
    sendReminder: false
    settings:
      addresses: oncall@lomashwood.com;devops@lomashwood.com
      singleEmail: false
      message: |
        Grafana Alert: {{ .Title }}

        {{ range .Alerts }}
        Alert: {{ .Name }}
        State: {{ .State }}
        Summary: {{ index .Annotations "summary" }}
        Description: {{ index .Annotations "description" }}
        {{ end }}

api_keys:

  - name: prometheus-scrape
    role: Viewer
    secondsToLive: 0

  - name: ci-dashboard-provisioner
    role: Admin
    secondsToLive: 0

  - name: oncall-read-only
    role: Viewer
    secondsToLive: 7776000

preferences:

  org:
    orgId: 1
    theme: dark
    homeDashboardUid: api-gateway-dashboard
    timezone: Europe/London
    weekStart: monday
    language: en-GB

  user_defaults:
    theme: dark
    timezone: Europe/London
    weekStart: monday
    language: en-GB