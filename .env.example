NODE_ENV=development
TZ=UTC

# ─── API Gateway ────────────────────────────────────────────────────────────
API_GATEWAY_PORT=4000
API_GATEWAY_HOST=0.0.0.0
API_BASE_URL=http://localhost:4000
INTERNAL_API_SECRET=

# ─── Service Ports ───────────────────────────────────────────────────────────
AUTH_SERVICE_PORT=4001
AUTH_SERVICE_URL=http://localhost:4001

PRODUCT_SERVICE_PORT=4002
PRODUCT_SERVICE_URL=http://localhost:4002

ORDER_PAYMENT_SERVICE_PORT=4003
ORDER_PAYMENT_SERVICE_URL=http://localhost:4003

APPOINTMENT_SERVICE_PORT=4004
APPOINTMENT_SERVICE_URL=http://localhost:4004

CONTENT_SERVICE_PORT=4005
CONTENT_SERVICE_URL=http://localhost:4005

CUSTOMER_SERVICE_PORT=4006
CUSTOMER_SERVICE_URL=http://localhost:4006

NOTIFICATION_SERVICE_PORT=4007
NOTIFICATION_SERVICE_URL=http://localhost:4007

ANALYTICS_SERVICE_PORT=4008
ANALYTICS_SERVICE_URL=http://localhost:4008

# ─── PostgreSQL ───────────────────────────────────────────────────────────────
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=lomash_wood_dev
POSTGRES_USER=lw_master
POSTGRES_PASSWORD=

DATABASE_URL=postgresql://lw_master:@localhost:5432/lomash_wood_dev?schema=public&sslmode=prefer
SHADOW_DATABASE_URL=postgresql://lw_master:@localhost:5432/lomash_wood_shadow?schema=public&sslmode=prefer

AUTH_DATABASE_URL=postgresql://lw_auth:@localhost:5432/lomash_wood_dev?schema=auth&sslmode=prefer
PRODUCT_DATABASE_URL=postgresql://lw_product:@localhost:5432/lomash_wood_dev?schema=product&sslmode=prefer
ORDER_DATABASE_URL=postgresql://lw_order:@localhost:5432/lomash_wood_dev?schema=order&sslmode=prefer
APPOINTMENT_DATABASE_URL=postgresql://lw_appointment:@localhost:5432/lomash_wood_dev?schema=appointment&sslmode=prefer
CONTENT_DATABASE_URL=postgresql://lw_content:@localhost:5432/lomash_wood_dev?schema=content&sslmode=prefer
CUSTOMER_DATABASE_URL=postgresql://lw_customer:@localhost:5432/lomash_wood_dev?schema=customer&sslmode=prefer
NOTIFICATION_DATABASE_URL=postgresql://lw_notification:@localhost:5432/lomash_wood_dev?schema=notification&sslmode=prefer
ANALYTICS_DATABASE_URL=postgresql://lw_analytics:@localhost:5432/lomash_wood_dev?schema=analytics&sslmode=prefer

TEST_DATABASE_URL=postgresql://lw_master:@localhost:5432/lomash_wood_test?schema=public&sslmode=prefer

# ─── Redis ────────────────────────────────────────────────────────────────────
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_URL=redis://:@localhost:6379/0
REDIS_TLS=false

# ─── JWT / Authentication ─────────────────────────────────────────────────────
JWT_PRIVATE_KEY_PATH=./keys/private.pem
JWT_PUBLIC_KEY_PATH=./keys/public.pem
JWT_KID=kid-dev-001
JWT_ISSUER=https://auth.lomashwood.com
JWT_AUDIENCE=lomashwood-api
JWT_ACCESS_TOKEN_TTL=900
JWT_REFRESH_TOKEN_TTL=2592000
JWT_ADMIN_REFRESH_TOKEN_TTL=28800

BETTER_AUTH_SECRET=
BETTER_AUTH_URL=http://localhost:4001

# ─── Stripe ───────────────────────────────────────────────────────────────────
STRIPE_SECRET_KEY=sk_test_
STRIPE_PUBLISHABLE_KEY=pk_test_
STRIPE_WEBHOOK_SECRET=whsec_
STRIPE_RESTRICTED_KEY=rk_test_
STRIPE_API_VERSION=2024-06-20
STRIPE_CURRENCY=gbp

# ─── AWS ─────────────────────────────────────────────────────────────────────
AWS_REGION=eu-west-2
AWS_ACCOUNT_ID=
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=

ECR_REGISTRY=
ECR_REGION=eu-west-2

S3_BUCKET_NAME=lomash-wood-media-dev
S3_BUCKET_REGION=eu-west-2
S3_PRESIGNED_URL_TTL=900
S3_MAX_FILE_SIZE_MB=10
S3_ALLOWED_MIME_TYPES=image/jpeg,image/png,image/webp,image/gif,application/pdf

# ─── AWS SES ─────────────────────────────────────────────────────────────────
SES_REGION=eu-west-2
SES_FROM_EMAIL=noreply@lomashwood.com
SES_FROM_NAME="Lomash Wood"
SES_REPLY_TO=support@lomashwood.com
SES_ACCESS_KEY_ID=
SES_SECRET_ACCESS_KEY=

# ─── AWS Secrets Manager ──────────────────────────────────────────────────────
SECRETS_MANAGER_REGION=eu-west-2
USE_SECRETS_MANAGER=false

# ─── Twilio ───────────────────────────────────────────────────────────────────
TWILIO_ACCOUNT_SID=
TWILIO_AUTH_TOKEN=
TWILIO_FROM_NUMBER=+44
TWILIO_MESSAGING_SERVICE_SID=

# ─── MSG91 (fallback SMS) ─────────────────────────────────────────────────────
MSG91_AUTH_KEY=
MSG91_SENDER_ID=LOMASH
MSG91_ROUTE=4

# ─── Firebase ────────────────────────────────────────────────────────────────
FIREBASE_PROJECT_ID=
FIREBASE_CLIENT_EMAIL=
FIREBASE_PRIVATE_KEY=
FIREBASE_SERVICE_ACCOUNT_JSON=

# ─── CORS ────────────────────────────────────────────────────────────────────
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001
CORS_MAX_AGE=86400

# ─── Rate Limiting ────────────────────────────────────────────────────────────
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_AUTH_MAX=10
RATE_LIMIT_UPLOAD_MAX=20
RATE_LIMIT_ANALYTICS_MAX=60

# ─── Logging ─────────────────────────────────────────────────────────────────
LOG_LEVEL=debug
LOG_FORMAT=pretty
LOG_AUDIT_ENABLED=true
LOG_AUDIT_FILE=/var/log/lomash-wood/audit.log

# ─── Monitoring ──────────────────────────────────────────────────────────────
SENTRY_DSN=
SENTRY_ENVIRONMENT=development
SENTRY_TRACES_SAMPLE_RATE=0.1

GRAFANA_URL=http://localhost:3100
PROMETHEUS_PORT=9090
LOKI_URL=http://localhost:3200

# ─── Feature Flags ───────────────────────────────────────────────────────────
FEATURE_LOYALTY_PROGRAMME=true
FEATURE_ONLINE_APPOINTMENTS=true
FEATURE_AI_ROOM_PLANNER=false
FEATURE_LIVE_CHAT=false
FEATURE_ANALYTICS_INGESTION=true

# ─── Appointment Booking ──────────────────────────────────────────────────────
APPOINTMENT_SLOT_DURATION_MINUTES=60
APPOINTMENT_BUFFER_MINUTES=15
APPOINTMENT_MAX_ADVANCE_DAYS=90
APPOINTMENT_CANCELLATION_CUTOFF_HOURS=24

# ─── Loyalty Programme ───────────────────────────────────────────────────────
LOYALTY_POINTS_PER_POUND=10
LOYALTY_SILVER_THRESHOLD=1000
LOYALTY_GOLD_THRESHOLD=5000
LOYALTY_PLATINUM_THRESHOLD=15000

# ─── Content ──────────────────────────────────────────────────────────────────
CDN_BASE_URL=
MEDIA_FETCH_URL_ALLOWLIST=lomashwood.com,cdn.lomashwood.com
BLOG_POSTS_PER_PAGE=12
PRODUCTS_PER_PAGE=24

# ─── Cookie Settings ─────────────────────────────────────────────────────────
COOKIE_DOMAIN=localhost
COOKIE_SECURE=false
COOKIE_SAME_SITE=lax
COOKIE_HTTP_ONLY=true

# ─── HaveIBeenPwned ───────────────────────────────────────────────────────────
HIBP_API_URL=https://api.pwnedpasswords.com
HIBP_ENABLED=true

# ─── Health Checks ───────────────────────────────────────────────────────────
HEALTH_CHECK_TIMEOUT_MS=5000
HEALTH_CHECK_INTERVAL_MS=30000
